<!DOCTYPE html>
<html></html>
<head>
    <meta charset="UTF-8">
    <title>"My Rock Paper Scissors game</title>
</head>
<body>
    <script>
        
        function game(numberRounds=5){
            //Initiates a game of rock paper scissors with by default numbers of round=5
            //starts by zeroing scores and intialising players moves at each new round
            //determines outcome at each round with roundResult
            //displays in console result using roundOutcomme
            //increments scores accordingly
            //on the last round displays final results using gameOutcome
            let playerScore =0;
            let computerScore =0;
            for (round=1;round<=numberRounds;round++){
                //let playerSelection=prompt("Time to play, please choose between: rock, paper, scissors");
                let playerSelection=humanPlay();
                let computerSelection=computerPlay();
                let roundResult=gameRound(playerSelection,computerSelection)
                switch(roundResult) {   
                    case 1: playerScore+=1
                            break;
                    case -1:computerScore+=1
                            break;
                }
                console.log(`****** Welcome to round ${round} ******`);
                console.log(roundOutcome(roundResult,playerSelection,computerSelection));
                console.log(`Current score: Player @ ${playerScore} VS Computer @ ${computerScore}`)
                console.log(` ****** End of round ${round} out of ${numberRounds} ******`)
            }
            return gameOutcome(playerScore,computerScore);
        }
        function abortGame(endGame){
            if (lowerCaseInput(endGame)==="end" || lowerCaseInput(endGame)==="" ){
                return "exitGame";
            }
        }
        function humanPlay(){
            let playerSelection=lowerCaseInput(prompt("Time to play, please choose between: rock, paper, scissors"));
            if (playerSelection==="rock" || playerSelection==="paper" ||playerSelection==="scissors"){
                return playerSelection;
            }
            else {
                return lowerCaseInput(prompt("Please enter a valid play or you will loose the round: rock, paper, scissors"));
            }
        }

        function computerPlay(){ 
            //Create a random integer between 0 and 2 included. 
            //If 0 return rock, if 1 return paper if 2 return scissors
            let randomOutcome=Math.floor(Math.random()*3)            
            if (randomOutcome===0) {
                return "rock";
            }
            else if (randomOutcome===1) {
                return "paper";
            }
            else {
                return "scissors";
            }
        }

        function lowerCaseInput(playerSelection){
            return playerSelection.toString().toLowerCase();
        }
        function gameRound(playerSelection,computerSelection){
            //Determines the outcome of a round of rock, paper scissors. 
            //If user wins +1, if user looses -1, if draw 0
            if (playerSelection===computerSelection){
                return 0;
            }
            if ((playerSelection==="rock" && computerSelection==="scissors")||(playerSelection==="paper" && computerSelection==="rock")||(playerSelection==="scissors" && computerSelection==="papper")){
                return 1;
            }
            else {
                return -1;
            } 
        }

        function roundOutcome(gameRound,playerSelection,computerSelection){
            //Phrases the round outcome based on:
            //gameRound result and players input
            if (gameRound===1){
                return `You win, ${playerSelection} beat ${computerSelection}`;
            } 
            else if (gameRound===-1){
                return `You loose, ${computerSelection} beat ${playerSelection}`;
            }
            else {
                return `It's a draw, both of you played ${playerSelection}`;
            }
        }

        function gameOutcome(playerScore,computerScore){
            //Phrases game outcome after last based on players' scores
            if (playerScore===computerScore){
                return `It is a draw: HUM ${playerScore} - CPU ${computerScore}`;
            }
            else if (playerScore>computerScore){
                return `Player wins, the final score is: HUM ${playerScore} - CPU ${computerScore}`;
            }
            else {
                return `Computer wins, the final score is: HUM ${playerScore} - CPU ${computerScore}`;
            }
        }
    </script>
</body>